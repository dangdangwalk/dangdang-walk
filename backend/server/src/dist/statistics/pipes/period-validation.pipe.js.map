{"version":3,"sources":["../../../src/statistics/pipes/period-validation.pipe.ts"],"sourcesContent":["import { BadRequestException, Injectable, PipeTransform } from '@nestjs/common';\n\nexport type Period = 'month' | 'week';\n\n@Injectable()\nexport class PeriodValidationPipe implements PipeTransform<string, Period> {\n    private readonly allowedPeriods;\n\n    constructor(allowedPeriods: Period[]) {\n        this.allowedPeriods = allowedPeriods;\n    }\n\n    transform(value: string): Period {\n        if (!value) {\n            throw new BadRequestException('period query parameter is missing.');\n        }\n\n        if (!this.allowedPeriods.includes(value as Period)) {\n            throw new BadRequestException(\n                `Invalid period: ${value}. Allowed periods are: ${this.allowedPeriods.join(', ')}`,\n            );\n        }\n\n        return value as Period;\n    }\n}\n"],"names":["PeriodValidationPipe","transform","value","BadRequestException","allowedPeriods","includes","join","constructor","Injectable"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";+BAKaA;;;eAAAA;;;wBALkD;;;;;;;;;;AAKxD,IAAA,AAAMA,uBAAN,MAAMA;IAOTC,UAAUC,KAAa,EAAU;QAC7B,IAAI,CAACA,OAAO;YACR,MAAM,IAAIC,2BAAmB,CAAC;QAClC;QAEA,IAAI,CAAC,IAAI,CAACC,cAAc,CAACC,QAAQ,CAACH,QAAkB;YAChD,MAAM,IAAIC,2BAAmB,CACzB,CAAC,gBAAgB,EAAED,MAAM,uBAAuB,EAAE,IAAI,CAACE,cAAc,CAACE,IAAI,CAAC,MAAM,CAAC;QAE1F;QAEA,OAAOJ;IACX;IAhBAK,YAAYH,cAAwB,CAAE;QAClC,IAAI,CAACA,cAAc,GAAGA;IAC1B;AAeJ;AApBaJ;IADZQ,IAAAA,kBAAU;;;;;GACER"}