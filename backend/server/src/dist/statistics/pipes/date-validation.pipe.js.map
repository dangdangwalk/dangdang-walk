{"version":3,"sources":["../../../src/statistics/pipes/date-validation.pipe.ts"],"sourcesContent":["import { BadRequestException, Injectable, PipeTransform } from '@nestjs/common';\n\n@Injectable()\nexport class DateValidationPipe implements PipeTransform<string, string> {\n    transform(value: string): string {\n        if (!value) {\n            throw new BadRequestException('date query parameter is missing.');\n        }\n\n        const dateFormat = /^\\d{4}-\\d{2}-\\d{2}$/;\n\n        if (!value.match(dateFormat)) {\n            throw new BadRequestException('Invalid date format. Please provide date in YYYY-MM-DD format.');\n        }\n\n        const [year, month, day] = value.split('-').map(Number);\n\n        if (month < 1 || month > 12) {\n            throw new BadRequestException(`Invalid month: ${month}. Month must be between 1 and 12.`);\n        }\n\n        const lastDayOfMonth = new Date(year, month, 0).getDate();\n\n        if (day < 1 || day > lastDayOfMonth) {\n            throw new BadRequestException(`Invalid day: ${day}. Day must be between 1 and ${lastDayOfMonth}.`);\n        }\n\n        return value;\n    }\n}\n"],"names":["DateValidationPipe","transform","value","BadRequestException","dateFormat","match","year","month","day","split","map","Number","lastDayOfMonth","Date","getDate","Injectable"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";+BAGaA;;;eAAAA;;;wBAHkD;;;;;;;AAGxD,IAAA,AAAMA,qBAAN,MAAMA;IACTC,UAAUC,KAAa,EAAU;QAC7B,IAAI,CAACA,OAAO;YACR,MAAM,IAAIC,2BAAmB,CAAC;QAClC;QAEA,MAAMC,aAAa;QAEnB,IAAI,CAACF,MAAMG,KAAK,CAACD,aAAa;YAC1B,MAAM,IAAID,2BAAmB,CAAC;QAClC;QAEA,MAAM,CAACG,MAAMC,OAAOC,IAAI,GAAGN,MAAMO,KAAK,CAAC,KAAKC,GAAG,CAACC;QAEhD,IAAIJ,QAAQ,KAAKA,QAAQ,IAAI;YACzB,MAAM,IAAIJ,2BAAmB,CAAC,CAAC,eAAe,EAAEI,MAAM,iCAAiC,CAAC;QAC5F;QAEA,MAAMK,iBAAiB,IAAIC,KAAKP,MAAMC,OAAO,GAAGO,OAAO;QAEvD,IAAIN,MAAM,KAAKA,MAAMI,gBAAgB;YACjC,MAAM,IAAIT,2BAAmB,CAAC,CAAC,aAAa,EAAEK,IAAI,4BAA4B,EAAEI,eAAe,CAAC,CAAC;QACrG;QAEA,OAAOV;IACX;AACJ;AA1BaF;IADZe,IAAAA,kBAAU;GACEf"}