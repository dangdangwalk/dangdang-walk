{"version":3,"sources":["../../src/dogs/dogs.controller.ts"],"sourcesContent":["import {\n    Body,\n    Controller,\n    Delete,\n    Get,\n    HttpCode,\n    Param,\n    ParseIntPipe,\n    Patch,\n    Post,\n    UseGuards,\n    UsePipes,\n    ValidationPipe,\n} from '@nestjs/common';\n\nimport { DogsService } from './dogs.service';\nimport { CreateDogDto } from './dtos/create-dog.dto';\nimport { UpdateDogDto } from './dtos/update-dog.dto';\nimport { AuthDogGuard } from './guards/auth-dog.guard';\n\nimport { DogProfileResponse } from './types/dogs.type';\n\nimport { AccessTokenPayload } from '../auth/token/token.service';\nimport { User } from '../users/decorators/user.decorator';\n\n@Controller('/dogs')\n@UsePipes(new ValidationPipe({ validateCustomDecorators: true, whitelist: true }))\nexport class DogsController {\n    constructor(private readonly dogsService: DogsService) {}\n\n    @Get()\n    async getProfileList(@User() { userId }: AccessTokenPayload): Promise<DogProfileResponse[]> {\n        return this.dogsService.getProfileList(userId);\n    }\n\n    @Post()\n    async create(@User() { userId }: AccessTokenPayload, @Body() createDogDto: CreateDogDto) {\n        await this.dogsService.createDogToUser(userId, createDogDto);\n    }\n\n    @Get('/:id(\\\\d+)')\n    @UseGuards(AuthDogGuard)\n    async getProfile(@Param('id', ParseIntPipe) dogId: number): Promise<DogProfileResponse> {\n        return this.dogsService.getProfile(dogId);\n    }\n\n    @Patch('/:id(\\\\d+)')\n    @HttpCode(204)\n    @UseGuards(AuthDogGuard)\n    async update(\n        @User() { userId }: AccessTokenPayload,\n        @Param('id', ParseIntPipe) dogId: number,\n        @Body() updateDogDto: UpdateDogDto,\n    ) {\n        await this.dogsService.updateDog(userId, dogId, updateDogDto);\n    }\n\n    @Delete('/:id(\\\\d+)')\n    @HttpCode(204)\n    @UseGuards(AuthDogGuard)\n    async delete(@User() { userId }: AccessTokenPayload, @Param('id', ParseIntPipe) dogId: number) {\n        await this.dogsService.deleteDogFromUser(userId, dogId);\n    }\n}\n"],"names":["DogsController","getProfileList","userId","dogsService","create","createDogDto","createDogToUser","getProfile","dogId","update","updateDogDto","updateDog","delete","deleteDogFromUser","constructor","Get","User","Post","Body","UseGuards","AuthDogGuard","Param","ParseIntPipe","Patch","HttpCode","Delete","Controller","UsePipes","ValidationPipe","validateCustomDecorators","whitelist"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";+BA2BaA;;;eAAAA;;;wBAdN;6BAEqB;8BACC;8BACA;8BACA;8BAIM;+BACd;;;;;;;;;;;;;;;AAId,IAAA,AAAMA,iBAAN,MAAMA;IAGT,MACMC,eAAe,AAAQ,EAAEC,MAAM,EAAsB,EAAiC;QACxF,OAAO,IAAI,CAACC,WAAW,CAACF,cAAc,CAACC;IAC3C;IAEA,MACME,OAAO,AAAQ,EAAEF,MAAM,EAAsB,EAAE,AAAQG,YAA0B,EAAE;QACrF,MAAM,IAAI,CAACF,WAAW,CAACG,eAAe,CAACJ,QAAQG;IACnD;IAEA,MAEME,WAAW,AAA2BC,KAAa,EAA+B;QACpF,OAAO,IAAI,CAACL,WAAW,CAACI,UAAU,CAACC;IACvC;IAEA,MAGMC,OACF,AAAQ,EAAEP,MAAM,EAAsB,EACtC,AAA2BM,KAAa,EACxC,AAAQE,YAA0B,EACpC;QACE,MAAM,IAAI,CAACP,WAAW,CAACQ,SAAS,CAACT,QAAQM,OAAOE;IACpD;IAEA,MAGME,OAAO,AAAQ,EAAEV,MAAM,EAAsB,EAAE,AAA2BM,KAAa,EAAE;QAC3F,MAAM,IAAI,CAACL,WAAW,CAACU,iBAAiB,CAACX,QAAQM;IACrD;IAlCAM,YAAY,AAAiBX,WAAwB,CAAE;aAA1BA,cAAAA;IAA2B;AAmC5D;;IAjCKY,IAAAA,WAAG;IACkBC,aAAAA,IAAAA,mBAAI;;;eAAe,gCAAkB,4BAAlB,gCAAkB;;;GAJlDhB;;IAQRiB,IAAAA,YAAI;IACSD,aAAAA,IAAAA,mBAAI;IAAoCE,aAAAA,IAAAA,YAAI;;;eAAzB,gCAAkB,4BAAlB,gCAAkB;eAAwB,0BAAY,4BAAZ,0BAAY;;;GAT9ElB;;IAaRe,IAAAA,WAAG,EAAC;IACJI,IAAAA,iBAAS,EAACC,0BAAY;IACLC,aAAAA,IAAAA,aAAK,EAAC,MAAMC,oBAAY;;;;;;GAfjCtB;;IAmBRuB,IAAAA,aAAK,EAAC;IACNC,IAAAA,gBAAQ,EAAC;IACTL,IAAAA,iBAAS,EAACC,0BAAY;IAElBJ,aAAAA,IAAAA,mBAAI;IACJK,aAAAA,IAAAA,aAAK,EAAC,MAAMC,oBAAY;IACxBJ,aAAAA,IAAAA,YAAI;;;eAFe,gCAAkB,4BAAlB,gCAAkB;;eAEhB,0BAAY,4BAAZ,0BAAY;;;GAzB7BlB;;IA8BRyB,IAAAA,cAAM,EAAC;IACPD,IAAAA,gBAAQ,EAAC;IACTL,IAAAA,iBAAS,EAACC,0BAAY;IACTJ,aAAAA,IAAAA,mBAAI;IAAoCK,aAAAA,IAAAA,aAAK,EAAC,MAAMC,oBAAY;;;eAA7C,gCAAkB,4BAAlB,gCAAkB;;;;GAjC1CtB;AAAAA;IAFZ0B,IAAAA,kBAAU,EAAC;IACXC,IAAAA,gBAAQ,EAAC,IAAIC,sBAAc,CAAC;QAAEC,0BAA0B;QAAMC,WAAW;IAAK;;;eAEjC,wBAAW,4BAAX,wBAAW;;GAD5C9B"}